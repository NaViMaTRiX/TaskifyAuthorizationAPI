--
-- PostgreSQL database dump
--

-- Dumped from database version 17.2 (Postgres.app)
-- Dumped by pg_dump version 17.0

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: RefreshTokens; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."RefreshTokens" (
    "Id" uuid NOT NULL,
    "Token" text NOT NULL,
    "ExpiresAt" timestamp with time zone NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "RevokedAt" timestamp with time zone,
    "UserId" uuid NOT NULL,
    "IsRevoked" boolean DEFAULT false NOT NULL
);


ALTER TABLE public."RefreshTokens" OWNER TO postgres;

--
-- Name: UserAuditLogs; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."UserAuditLogs" (
    "Id" bigint NOT NULL,
    "UserId" uuid NOT NULL,
    "Action" integer NOT NULL,
    "IpAddress" text,
    "Details" text,
    "Timestamp" timestamp with time zone NOT NULL
);


ALTER TABLE public."UserAuditLogs" OWNER TO postgres;

--
-- Name: UserAuditLogs_Id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."UserAuditLogs" ALTER COLUMN "Id" ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."UserAuditLogs_Id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: UserLoginActivities; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."UserLoginActivities" (
    "Id" uuid NOT NULL,
    "UserId" uuid NOT NULL,
    "IpAddress" character varying(45) NOT NULL,
    "DeviceType" character varying(50) NOT NULL,
    "DeviceBrowser" character varying(100) NOT NULL,
    "DeviceOs" character varying(100) NOT NULL,
    "Country" character varying(100) NOT NULL,
    "City" character varying(100) NOT NULL,
    "LoginTime" timestamp with time zone NOT NULL,
    "LastActivityTime" timestamp with time zone,
    "IsActive" boolean NOT NULL,
    "IsSuspicious" boolean NOT NULL,
    "FailedLoginAttempts" integer NOT NULL,
    "DeviceFingerprint" character varying(256) NOT NULL
);


ALTER TABLE public."UserLoginActivities" OWNER TO postgres;

--
-- Name: Users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Users" (
    "Id" uuid NOT NULL,
    "Email" text NOT NULL,
    "PasswordHash" text NOT NULL,
    "FirstName" text NOT NULL,
    "LastName" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "LastLoginAt" timestamp with time zone,
    "Role" integer DEFAULT 0 NOT NULL
);


ALTER TABLE public."Users" OWNER TO postgres;

--
-- Name: __EFMigrationsHistory; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL
);


ALTER TABLE public."__EFMigrationsHistory" OWNER TO postgres;

--
-- Data for Name: RefreshTokens; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public."RefreshTokens" ("Id", "Token", "ExpiresAt", "CreatedAt", "RevokedAt", "UserId", "IsRevoked") FROM stdin;
3c5de732-c2c8-4947-a989-713184f16d02	srtoQHmOV5x1RPqGHJUuOqm1JAC8kn9S6boeizckW4M=	2025-02-11 18:52:34.239151+03	2025-02-04 18:52:34.239023+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
ee2bde64-bb37-46ea-9c72-633685bbf786	4DAcLpWqyEtefYultlRpHkWjCYt26GX7MVVm6MfNXz8=	2025-02-11 19:09:01.829105+03	2025-02-04 19:09:01.828969+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
a4d666b4-62a5-4d5b-a0e9-a652e5225a29	wWW57xkXNN6pBwaOL9wCIfbuYVdKcQ9gRX8u6oN0JMM=	2025-02-11 19:32:43.653802+03	2025-02-04 19:32:43.653666+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
66caf6a1-e972-4683-8b27-17fd698d269a	XCtM/4ZhR0siaHBLov925ox3nrEXZ1yzw/gK0QIQ8Ec=	2025-02-11 19:42:36.836862+03	2025-02-04 19:42:36.836721+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
7eb9000d-1fb8-4717-a0c4-92b9caa2b766	MIde1ZmlWTVec9LGKsXDimKAEwqZgRowMqxL06uaBYg=	2025-02-11 19:49:10.349224+03	2025-02-04 19:49:10.349062+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
73353dc8-a703-4f54-a834-29867a3dd477	mPHPH75OF9AYxrzyaKCaGvVlJr+2QAPQ+tbj6ERSvYs=	2025-02-11 21:00:41.654322+03	2025-02-04 21:00:41.654142+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
4664183b-c579-4fd5-8234-9f1875b254eb	U5NtuQkM5nt4f12mCMZVGDRJ8Y+8FW5IORee5a/IHV8=	2025-02-11 21:02:32.266118+03	2025-02-04 21:02:32.266118+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
0ea93c1f-0e2b-40a6-bf82-f6c334052f33	0Vckb2u8QQyFgmZpm7DpRJJxgP8ugQHsvnYN83paUqU=	2025-02-11 21:05:37.021924+03	2025-02-04 21:05:37.02172+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
9ba4699d-1b64-41c0-8510-5c52a9a330ce	skavL1o7UsFwrvY4ySCkFQNCMn3uUSSYLukiGl3ZEtI=	2025-02-11 21:25:21.680832+03	2025-02-04 21:25:21.680647+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
b4493476-42ff-4072-9076-f280ed62cf25	kxAW9hlMGOX94D+2PNjoSuNIXfsTTgAzNx7hqLwD8rE=	2025-02-11 21:47:32.82418+03	2025-02-04 21:47:32.823987+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
541a5d79-0e32-4dc0-b81a-3774d60607ef	v25m0pa9RdxHuhMZ17848yyOueIJk8wFLtvWW5iNIWk=	2025-02-11 22:08:19.423499+03	2025-02-04 22:08:19.423331+03	\N	473f6285-a450-4c24-8fd4-12185c374165	f
ea4092ba-1a8a-4aaf-bffa-2dd38ffb927e	+yfSonFLHEaRby+IakSlGBxjw5BqrWLk57DSa1EqynY=	2025-02-11 22:13:15.744398+03	2025-02-04 22:13:15.744398+03	\N	473f6285-a450-4c24-8fd4-12185c374165	f
fed5d57d-05fb-43a2-9a1e-89df1394296e	h4wVsEfwrkR4QsZsh1vhs8VBzmmeZ12g6V9wdX63jQU=	2025-02-11 22:16:07.520119+03	2025-02-04 22:16:07.520119+03	\N	473f6285-a450-4c24-8fd4-12185c374165	f
7c8a60a7-f8ee-468c-8ffa-3458049152b9	BNo98tvni9caATRL3FowpDZnWjWE5oUATV3YdnaXdIc=	2025-02-11 22:20:10.364276+03	2025-02-04 22:20:10.364276+03	\N	473f6285-a450-4c24-8fd4-12185c374165	f
f76b39b6-08c6-4ec7-b085-e009c3769f9d	mhWKgI0YK/SGu3IKE0cn0KmJpFNLGQFpZkLBrkpdE/I=	2025-02-11 22:26:02.572104+03	2025-02-04 22:26:02.571925+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
35ab89e5-dc79-445c-a680-464e13a07fda	7Sq5nIpw9XXqnI2EXdHdWyn6HVBy7vDySuFMQ9pQLq8=	2025-02-11 23:04:18.615894+03	2025-02-04 23:04:18.615706+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
c287f17d-96c4-4bf5-a4d1-5de66d7d1e64	adj2/0dqcV2arl+Cz6p9rZ7XBbuwgN2I+OqTzcZdGT4=	2025-02-11 23:35:18.386919+03	2025-02-04 23:35:18.386744+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
9951b103-f801-4140-9200-646971b656c0	N3iWZCA5aMvAvQNHg4QvhQJbKbkgtwdOtLeMOXa7PVY=	2025-02-12 11:28:36.925433+03	2025-02-05 11:28:36.925225+03	\N	68797751-e65f-4e9d-8d23-8616180ebd0c	f
\.


--
-- Data for Name: UserAuditLogs; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public."UserAuditLogs" ("Id", "UserId", "Action", "IpAddress", "Details", "Timestamp") FROM stdin;
1	68797751-e65f-4e9d-8d23-8616180ebd0c	1	127.0.0.1	\N	2025-02-04 21:00:41.389421+03
2	68797751-e65f-4e9d-8d23-8616180ebd0c	1	127.0.0.1	\N	2025-02-04 21:02:32.261677+03
3	68797751-e65f-4e9d-8d23-8616180ebd0c	2	127.0.0.1	\N	2025-02-04 21:05:28.31467+03
4	68797751-e65f-4e9d-8d23-8616180ebd0c	1	127.0.0.1	\N	2025-02-04 21:05:36.979708+03
5	68797751-e65f-4e9d-8d23-8616180ebd0c	1	127.0.0.1	\N	2025-02-04 21:25:21.518688+03
6	68797751-e65f-4e9d-8d23-8616180ebd0c	1	127.0.0.1	\N	2025-02-04 21:47:32.683507+03
7	473f6285-a450-4c24-8fd4-12185c374165	1	127.0.0.1	\N	2025-02-04 22:08:19.303532+03
8	473f6285-a450-4c24-8fd4-12185c374165	1	127.0.0.1	\N	2025-02-04 22:13:15.738026+03
9	68797751-e65f-4e9d-8d23-8616180ebd0c	3	\N	Роль пользователя изменена с User на Admin	2025-02-04 22:14:39.474295+03
10	68797751-e65f-4e9d-8d23-8616180ebd0c	3	\N	Роль пользователя изменена с Admin на Guest	2025-02-04 22:15:06.611441+03
11	68797751-e65f-4e9d-8d23-8616180ebd0c	3	\N	Роль пользователя изменена с Guest на SuperAdmin	2025-02-04 22:15:15.137825+03
12	473f6285-a450-4c24-8fd4-12185c374165	1	127.0.0.1	\N	2025-02-04 22:16:07.515554+03
13	473f6285-a450-4c24-8fd4-12185c374165	1	127.0.0.1	\N	2025-02-04 22:20:10.362004+03
14	68797751-e65f-4e9d-8d23-8616180ebd0c	1	127.0.0.1	\N	2025-02-04 22:26:02.416532+03
15	473f6285-a450-4c24-8fd4-12185c374165	3	\N	Роль пользователя изменена с SuperAdmin на User	2025-02-04 22:26:40.013055+03
16	473f6285-a450-4c24-8fd4-12185c374165	3	\N	Роль пользователя изменена с User на Moderator	2025-02-04 22:29:15.359092+03
17	68797751-e65f-4e9d-8d23-8616180ebd0c	1	127.0.0.1	\N	2025-02-04 23:04:18.449703+03
18	473f6285-a450-4c24-8fd4-12185c374165	3	\N	Роль пользователя изменена с Admin на User	2025-02-04 23:05:46.726149+03
19	68797751-e65f-4e9d-8d23-8616180ebd0c	1	127.0.0.1	\N	2025-02-04 23:35:18.224766+03
20	68797751-e65f-4e9d-8d23-8616180ebd0c	1	127.0.0.1	\N	2025-02-05 11:28:36.777356+03
21	00000000-0000-0000-0000-000000000000	2	127.0.0.1	\N	2025-02-05 14:19:46.97153+03
\.


--
-- Data for Name: UserLoginActivities; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public."UserLoginActivities" ("Id", "UserId", "IpAddress", "DeviceType", "DeviceBrowser", "DeviceOs", "Country", "City", "LoginTime", "LastActivityTime", "IsActive", "IsSuspicious", "FailedLoginAttempts", "DeviceFingerprint") FROM stdin;
\.


--
-- Data for Name: Users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public."Users" ("Id", "Email", "PasswordHash", "FirstName", "LastName", "CreatedAt", "LastLoginAt", "Role") FROM stdin;
473f6285-a450-4c24-8fd4-12185c374165	flniver2016sony@gmail.com	$2a$11$HvSwb5bV5zUJtkwjriDBCOCzIl3laH9nbRnH73sw9IfszKI18.RH6	Just	Enogth	2025-02-04 22:08:19.103997+03	2025-02-04 22:20:10.359103+03	1
68797751-e65f-4e9d-8d23-8616180ebd0c	flniver2016@gmail.com	$2a$11$i1wLNlB9AbizFdhe7KWaQOcoYGwtVIgH.yJFexu/GhyczW/9xzkP6	Nikita	Klischenko	2025-02-04 18:52:33.792714+03	2025-02-05 11:28:36.551474+03	4
\.


--
-- Data for Name: __EFMigrationsHistory; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public."__EFMigrationsHistory" ("MigrationId", "ProductVersion") FROM stdin;
20250204152513_InitialCreate	8.0.0
20250204161638_AddUserRoleColumn	8.0.0
20250204161724_SetDefaultUserRoles	8.0.0
20250204161933_AddUserAuditLogsTable	8.0.0
20250204165213_AddUserAuditLogsTableWithIndexes	8.0.0
20250205100918_AddLogoutAndAuditActions	8.0.0
20250205110910_AddUserLoginActivityTable	8.0.0
20250205111750_AddUserLoginActivityTableDocker	8.0.0
20250205202748_Add table UserLoginActivities	8.0.0
\.


--
-- Name: UserAuditLogs_Id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."UserAuditLogs_Id_seq"', 21, true);


--
-- Name: RefreshTokens PK_RefreshTokens; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."RefreshTokens"
    ADD CONSTRAINT "PK_RefreshTokens" PRIMARY KEY ("Id");


--
-- Name: UserAuditLogs PK_UserAuditLogs; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."UserAuditLogs"
    ADD CONSTRAINT "PK_UserAuditLogs" PRIMARY KEY ("Id");


--
-- Name: UserLoginActivities PK_UserLoginActivities; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."UserLoginActivities"
    ADD CONSTRAINT "PK_UserLoginActivities" PRIMARY KEY ("Id");


--
-- Name: Users PK_Users; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Users"
    ADD CONSTRAINT "PK_Users" PRIMARY KEY ("Id");


--
-- Name: __EFMigrationsHistory PK___EFMigrationsHistory; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."__EFMigrationsHistory"
    ADD CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId");


--
-- Name: IX_RefreshTokens_UserId; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "IX_RefreshTokens_UserId" ON public."RefreshTokens" USING btree ("UserId");


--
-- Name: IX_UserAuditLogs_Timestamp; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "IX_UserAuditLogs_Timestamp" ON public."UserAuditLogs" USING btree ("Timestamp");


--
-- Name: IX_UserAuditLogs_UserId; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "IX_UserAuditLogs_UserId" ON public."UserAuditLogs" USING btree ("UserId");


--
-- Name: IX_UserLoginActivities_UserId; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "IX_UserLoginActivities_UserId" ON public."UserLoginActivities" USING btree ("UserId");


--
-- Name: IX_Users_Email; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX "IX_Users_Email" ON public."Users" USING btree ("Email");


--
-- Name: RefreshTokens FK_RefreshTokens_Users_UserId; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."RefreshTokens"
    ADD CONSTRAINT "FK_RefreshTokens_Users_UserId" FOREIGN KEY ("UserId") REFERENCES public."Users"("Id") ON DELETE CASCADE;


--
-- Name: UserLoginActivities FK_UserLoginActivities_Users_UserId; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."UserLoginActivities"
    ADD CONSTRAINT "FK_UserLoginActivities_Users_UserId" FOREIGN KEY ("UserId") REFERENCES public."Users"("Id") ON DELETE CASCADE;


--
-- PostgreSQL database dump complete
--

